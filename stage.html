<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>City Huntï½œæ™¯å³°èŠ±åœ’æ¸¬è©¦</title>

  <style>
    body{
      margin:0;
      font-family: system-ui, -apple-system, Arial, sans-serif;
      background:#0b1220;
      color:#fff;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:16px;
    }
    .card{
      background:#121a2b;
      border-radius:16px;
      padding:18px;
      width:100%;
      max-width:420px;
      box-shadow:0 10px 30px rgba(0,0,0,.4);
    }
    h1{font-size:22px;margin:0 0 10px}
    p{line-height:1.5}
    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.1);
      font-size:12px;
      margin-bottom:10px;
    }
    button{
      width:100%;
      padding:14px;
      margin-top:12px;
      border:none;
      border-radius:12px;
      font-size:16px;
      font-weight:700;
      background:#60a5fa;
      color:#000;
    }
    input{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:none;
      margin-top:10px;
      font-size:16px;
    }
    img{
      width:100%;
      border-radius:12px;
      margin:10px 0;
    }
    .hidden{display:none}
    .ok{color:#2dd4bf}
    .bad{color:#fb7185}
  </style>
</head>

<body>
  <div class="card">
    <span class="badge">ğŸ“ æ¸¬è©¦é—œå¡ï¼šå±¯é–€æ™¯å³°èŠ±åœ’</span>

    <h1>City Huntï½œä»»å‹™ 1</h1>

    <p id="status">
      è«‹æŒ‰ã€Œé–‹å§‹å®šä½ã€ï¼Œä¸¦å…è¨±ä½ç½®æ¬Šé™ã€‚
    </p>

    <button onclick="startGPS()">ğŸ“¡ é–‹å§‹å®šä½</button>

    <div id="quiz" class="hidden">
      <hr style="margin:16px 0;opacity:.2">

      <p><strong>ä»»å‹™ï¼š</strong><br>
      å°ç…§ä¸‹é¢å¼µç›¸ï¼Œä¸¦è§€å¯Ÿä½ è€Œå®¶èº«è™•å˜…åœ°æ–¹ã€‚</p>

      <img src="https://upload.wikimedia.org/wikipedia/commons/6/63/Kingswood_Villas_Tuen_Mun.jpg">

      <p>
        å•é¡Œï¼š<br>
        æ™¯å³°èŠ±åœ’ä½å®…å¤–ç‰†ä¸»è¦å±¬æ–¼å’©é¡è‰²ç³»ï¼Ÿ
        <br><small>ï¼ˆæç¤ºï¼šå””ä¿‚ç™½è‰²ï¼‰</small>
      </p>

      <input id="answer" placeholder="è¼¸å…¥ç­”æ¡ˆï¼ˆä¾‹å¦‚ï¼šå•¡è‰²ï¼‰">

      <button onclick="checkAnswer()">âœ… æäº¤ç­”æ¡ˆ</button>

      <p id="feedback"></p>
    </div>
  </div>

<script>
/* ===== è¨­å®šï¼ˆä½ å””éœ€è¦æ”¹ï¼‰ ===== */
const TARGET_LAT = 22.4012;   // æ™¯å³°èŠ±åœ’
const TARGET_LNG = 113.9697;
const RADIUS = 200;           // 200 ç±³è§£é–

function startGPS(){
  if(!navigator.geolocation){
    document.getElementById("status").innerHTML =
      "<span class='bad'>âŒ å‘¢éƒ¨æ‰‹æ©Ÿå””æ”¯æ´ GPS</span>";
    return;
  }

  document.getElementById("status").innerText = "ğŸ“¡ å®šä½ä¸­ï¼Œè«‹ç¨ç­‰â€¦";

  navigator.geolocation.getCurrentPosition(
    pos=>{
      const d = distance(
        pos.coords.latitude,
        pos.coords.longitude,
        TARGET_LAT,
        TARGET_LNG
      );

      if(d <= RADIUS){
        document.getElementById("status").innerHTML =
          "<span class='ok'>âœ… å·²åˆ°é”æ™¯å³°èŠ±åœ’ç¯„åœï¼Œä»»å‹™è§£é–ï¼</span>";
        document.getElementById("quiz").classList.remove("hidden");
      }else{
        document.getElementById("status").innerHTML =
          "æœªåˆ°é”ç›®æ¨™ä½ç½®ï¼Œä»²æœ‰ <strong>" + Math.round(d) +
          " ç±³</strong><br>ï¼ˆè«‹è¡Œè¿‘å°‘å°‘ï¼‰";
      }
    },
    ()=>{
      document.getElementById("status").innerHTML =
        "<span class='bad'>âŒ å®šä½å¤±æ•—ï¼Œè«‹ç¢ºèªå·²å…è¨±ä½ç½®æ¬Šé™</span>";
    },
    { enableHighAccuracy:true, timeout:12000 }
  );
}

function checkAnswer(){
  const v = document.getElementById("answer").value.trim().toLowerCase();
  const okAnswers = ["å•¡è‰²","æ£•è‰²","ç°è‰²","æ·±è‰²","brown","grey","gray"];

  if(okAnswers.includes(v)){
    document.getElementById("feedback").innerHTML =
      "<span class='ok'>ğŸ‰ æ­£ç¢ºï¼ä½ å·²å®Œæˆæ¸¬è©¦ä»»å‹™ã€‚</span>";
  }else{
    document.getElementById("feedback").innerHTML =
      "<span class='bad'>âŒ æœªæ­£ç¢ºï¼Œå†è§€å¯Ÿä¸‹å‘¨åœå»ºç¯‰ç‰©å…ˆç­”ï½</span>";
  }
}

/* è·é›¢è¨ˆç®—ï¼ˆç±³ï¼‰ */
function distance(lat1,lng1,lat2,lng2){
  const R=6371000;
  const dLat=(lat2-lat1)*Math.PI/180;
  const dLng=(lng2-lng1)*Math.PI/180;
  const a=
    Math.sin(dLat/2)**2 +
    Math.cos(lat1*Math.PI/180) *
    Math.cos(lat2*Math.PI/180) *
    Math.sin(dLng/2)**2;
  return 2*R*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
}
</script>
</body>
</html>

