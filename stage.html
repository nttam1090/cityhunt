<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>City Hunt ä»»å‹™</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="card">
    <h2>ğŸ“ ä»»å‹™ 1</h2>
    <p id="status">è«‹æŒ‰ã€Œé–‹å§‹å®šä½ã€</p>
    <button class="btn" onclick="locate()">é–‹å§‹å®šä½</button>

    <div id="quiz" style="display:none">
      <p>å•é¡Œï¼šä½ è€Œå®¶è¦‹åˆ°å˜…åœ°æ¨™ä¿‚å’©é¡è‰²ï¼Ÿ</p>
      <input id="ans" placeholder="è¼¸å…¥ç­”æ¡ˆ" />
      <button class="btn" onclick="check()">æäº¤ç­”æ¡ˆ</button>
    </div>
  </main>

<script>
const target = { lat: 30.0000, lng: 103.0000 }; // ä¹‹å¾Œæ”¹æˆå››å·æ™¯é»
const radius = 100;

function locate(){
  navigator.geolocation.getCurrentPosition(pos=>{
    const d = distance(pos.coords.latitude,pos.coords.longitude,target.lat,target.lng);
    if(d < radius){
      document.getElementById("status").innerText="âœ… å·²åˆ°é”ï¼Œä»»å‹™è§£é–";
      document.getElementById("quiz").style.display="block";
    }else{
      document.getElementById("status").innerText="æœªåˆ°é”ç›®æ¨™ï¼Œä»²æœ‰ "+Math.round(d)+" ç±³";
    }
  });
}

function check(){
  const v = document.getElementById("ans").value.toLowerCase();
  if(v==="ç´…è‰²"){
    location.href="finish.html";
  }else{
    alert("å†è©¦ä¸‹ï¼");
  }
}

function distance(a,b,c,d){
  const R=6371000;
  const x=(c-a)*Math.PI/180;
  const y=(d-b)*Math.PI/180;
  return Math.sqrt(x*x+y*y)*R;
}
</script>
</body>
</html>
